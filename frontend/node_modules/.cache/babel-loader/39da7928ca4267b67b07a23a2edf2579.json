{"ast":null,"code":"import _regeneratorRuntime from\"D:/VSCode/SessionAuth/ChatApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/VSCode/SessionAuth/ChatApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import Cookies from'js-cookie';import axios from'axios';import{LOAD_USER_PROFILE_FAIL,LOAD_USER_PROFILE_SUCCESS,UPDATE_USER_PROFILE_FAIL,UPDATE_USER_PROFILE_SUCCESS,GET_SEARCHED_FRIENDS_FAIL,GET_SEARCHED_FRIENDS_SUCCESS}from'./types';//To get user data\n//  const dispatch = useDispatch(function)\nexport var update_user_profile=function update_user_profile(first_name,last_name,phone,city){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"yaha aya tha..\");config={headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':Cookies.get('csrftoken')}};body=JSON.stringify({'withCredentials':true,first_name:first_name,last_name:last_name,phone:phone,city:city});_context.prev=3;_context.next=6;return axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/profile/update\"),body,config);case 6:res=_context.sent;if(res.data.profile&&res.data.username){dispatch({type:UPDATE_USER_PROFILE_SUCCESS,payload:res.data});}else{dispatch({type:UPDATE_USER_PROFILE_FAIL});}_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](3);dispatch({type:UPDATE_USER_PROFILE_FAIL});case 13:case\"end\":return _context.stop();}}},_callee,null,[[3,10]]);}));return function(_x){return _ref.apply(this,arguments);};}();};//To UPDATE USER_PROFILE DATA\nexport var load_user=function load_user(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var config,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config={headers:{'Accept':'application/json','Content-Type':'application/json'// 'X-CSRFToken':Cookies.get('csrftoken') no need when get request is made\n}};_context2.prev=1;_context2.next=4;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/profile/user\"),config);case 4:res=_context2.sent;if(res.data.error){dispatch({type:LOAD_USER_PROFILE_FAIL});}else{dispatch({type:LOAD_USER_PROFILE_SUCCESS,payload:res.data});}_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch({type:LOAD_USER_PROFILE_FAIL});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};","map":{"version":3,"sources":["D:/VSCode/SessionAuth/ChatApp/frontend/src/actions/profile.js"],"names":["Cookies","axios","LOAD_USER_PROFILE_FAIL","LOAD_USER_PROFILE_SUCCESS","UPDATE_USER_PROFILE_FAIL","UPDATE_USER_PROFILE_SUCCESS","GET_SEARCHED_FRIENDS_FAIL","GET_SEARCHED_FRIENDS_SUCCESS","update_user_profile","first_name","last_name","phone","city","dispatch","console","log","config","headers","get","body","JSON","stringify","put","process","env","REACT_APP_API_URL","res","data","profile","username","type","payload","load_user","error"],"mappings":"uTAAA,MAAOA,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,sBAAT,CAAiCC,yBAAjC,CACQC,wBADR,CACiCC,2BADjC,CAEQC,yBAFR,CAEkCC,4BAFlC,KAGe,SAHf,CAIA;AACA;AACC,MAAO,IAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAAEC,UAAF,CAAcC,SAAd,CAAyBC,KAAzB,CAAgCC,IAAhC,iGAAuC,iBAAMC,QAAN,sIACtEC,OAAO,CAACC,GAAR,CAAY,gBAAZ,EACKC,MAFiE,CAExD,CACXC,OAAO,CAAG,CACN,SAAS,kBADH,CAEN,eAAe,kBAFT,CAGN,cAAcjB,OAAO,CAACkB,GAAR,CAAY,WAAZ,CAHR,CADC,CAFwD,CAUjEC,IAViE,CAU1DC,IAAI,CAACC,SAAL,CAAe,CACxB,kBAAkB,IADM,CAExBZ,UAAU,CAACA,UAFa,CAGxBC,SAAS,CAACA,SAHc,CAIxBC,KAAK,CAACA,KAJkB,CAKxBC,IAAI,CAACA,IALmB,CAAf,CAV0D,uCAoBjDX,CAAAA,KAAK,CAACqB,GAAN,WAAaC,OAAO,CAACC,GAAR,CAAYC,iBAAzB,oBAA4DN,IAA5D,CAAiEH,MAAjE,CApBiD,QAoB7DU,GApB6D,eAsBnE,GAAGA,GAAG,CAACC,IAAJ,CAASC,OAAT,EAAoBF,GAAG,CAACC,IAAJ,CAASE,QAAhC,CAA0C,CACtChB,QAAQ,CAAC,CACLiB,IAAI,CAACzB,2BADA,CAEL0B,OAAO,CAACL,GAAG,CAACC,IAFP,CAAD,CAAR,CAIH,CALD,IAMK,CACDd,QAAQ,CAAC,CACLiB,IAAI,CAAC1B,wBADA,CAAD,CAAR,CAIH,CAjCkE,iFAoCnES,QAAQ,CAAC,CACLiB,IAAI,CAAC1B,wBADA,CAAD,CAAR,CApCmE,qEAAvC,gEAA5B,CAyCR;AACA,MAAO,IAAM4B,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,mGAAI,kBAAMnB,QAAN,qIACnBG,MADmB,CACV,CACXC,OAAO,CAAG,CACN,SAAS,kBADH,CAEN,eAAe,kBACf;AAHM,CADC,CADU,yCAWHhB,CAAAA,KAAK,CAACiB,GAAN,WAAaK,OAAO,CAACC,GAAR,CAAYC,iBAAzB,kBAA0DT,MAA1D,CAXG,QAWfU,GAXe,gBAarB,GAAGA,GAAG,CAACC,IAAJ,CAASM,KAAZ,CAAmB,CACfpB,QAAQ,CAAC,CACLiB,IAAI,CAAC5B,sBADA,CAAD,CAAR,CAGH,CAJD,IAKK,CACDW,QAAQ,CAAC,CACLiB,IAAI,CAAC3B,yBADA,CAEL4B,OAAO,CAACL,GAAG,CAACC,IAFP,CAAD,CAAR,CAIH,CAvBoB,mFA0BrBd,QAAQ,CAAC,CACLiB,IAAI,CAAC5B,sBADA,CAAD,CAAR,CA1BqB,sEAAJ,kEAAlB","sourcesContent":["import Cookies from 'js-cookie'\r\nimport axios from 'axios'\r\n\r\nimport { LOAD_USER_PROFILE_FAIL, LOAD_USER_PROFILE_SUCCESS ,\r\n        UPDATE_USER_PROFILE_FAIL,UPDATE_USER_PROFILE_SUCCESS,\r\n        GET_SEARCHED_FRIENDS_FAIL,GET_SEARCHED_FRIENDS_SUCCESS,\r\n        } from './types'\r\n//To get user data\r\n//  const dispatch = useDispatch(function)\r\n export const update_user_profile = ( first_name, last_name, phone, city)=>async dispatch => {\r\n     console.log(\"yaha aya tha..\")\r\n    const config = {\r\n        headers : {\r\n            'Accept':'application/json',\r\n            'Content-Type':'application/json',\r\n            'X-CSRFToken':Cookies.get('csrftoken') \r\n        }\r\n    };\r\n\r\n    const body = JSON.stringify({\r\n        'withCredentials':true,\r\n        first_name:first_name,\r\n        last_name:last_name, \r\n        phone:phone, \r\n        city:city\r\n    })\r\n\r\n    try {\r\n        \r\n        const res = await axios.put(`${process.env.REACT_APP_API_URL}/profile/update`,body,config)\r\n        \r\n        if(res.data.profile && res.data.username) {\r\n            dispatch({\r\n                type:UPDATE_USER_PROFILE_SUCCESS,\r\n                payload:res.data\r\n            })\r\n        }\r\n        else {\r\n            dispatch({\r\n                type:UPDATE_USER_PROFILE_FAIL,\r\n            \r\n            })\r\n        }\r\n\r\n    } catch (error) {\r\n        dispatch({\r\n            type:UPDATE_USER_PROFILE_FAIL\r\n        })\r\n    }\r\n}\r\n//To UPDATE USER_PROFILE DATA\r\nexport const load_user = ()=>async dispatch => {\r\n    const config = {\r\n        headers : {\r\n            'Accept':'application/json',\r\n            'Content-Type':'application/json',\r\n            // 'X-CSRFToken':Cookies.get('csrftoken') no need when get request is made\r\n        }\r\n    };\r\n\r\n    try {\r\n        \r\n        const res = await axios.get(`${process.env.REACT_APP_API_URL}/profile/user`,config)\r\n\r\n        if(res.data.error) {\r\n            dispatch({\r\n                type:LOAD_USER_PROFILE_FAIL\r\n            })\r\n        }\r\n        else {\r\n            dispatch({\r\n                type:LOAD_USER_PROFILE_SUCCESS,\r\n                payload:res.data\r\n            })\r\n        }\r\n\r\n    } catch (error) {\r\n        dispatch({\r\n            type:LOAD_USER_PROFILE_FAIL\r\n        })\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}