{"ast":null,"code":"import _slicedToArray from\"D:/VSCode/SessionAuth/ChatApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect}from\"react\";import{get_searched_user_list}from'../actions/auth';import{connect}from'react-redux';import{get_friend_list}from\"../actions/friends\";import{del_friend}from'../actions/friends';// import { update_user_profile } from \"../actions/profile\";\n// import { delete_account } from \"../actions/auth\";\nimport'../styles/friends.css';import FriendCard from\"./FriendCard\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Friends=function Friends(_ref){var get_searched_user_list=_ref.get_searched_user_list,get_friend_list=_ref.get_friend_list,searchedUser=_ref.searchedUser,friendlist=_ref.friendlist,user_name=_ref.user_name;console.log(\"Searched User : \",searchedUser);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),searchItem=_useState2[0],setSearchItem=_useState2[1];var _useState3=useState(friendlist),_useState4=_slicedToArray(_useState3,2),searchList=_useState4[0],setsearchList=_useState4[1];var _onChange=function onChange(e){return setSearchItem(e.target.value);};useEffect(function(){get_friend_list();},[]);useEffect(function(){setsearchList(friendlist);friendTag();console.log(\"DRUGS\");},[friendlist]);useEffect(function(){deleteCommonElements(friendlist,searchedUser);},searchedUser);console.log(\"SearchList : \",searchList);console.log(\"FriendList : \",friendlist);var _onClick=function onClick(e){// Check in friend list\nvar flag=0;if(friendlist.length!=0){// Check in friend list\nvar list=friendlist.filter(checkUsername);if(list.length!=0){setsearchList(list);flag=1;}}// Check in searched users list\nif(searchedUser.length!=0&&flag===0){var _list=searchedUser.filter(checkUsername);if(_list.length!=0){setsearchList(_list);flag=1;}}//Check all\nif(flag==0){get_searched_user_list(searchItem);}};var checkUsername=function checkUsername(user){return user.username.includes(searchItem);};var deleteCommonElements=function deleteCommonElements(friendlist,searchedUser){searchedUser.map(function(elem){friendlist.map(function(friend){if(friend[\"username\"]!==elem[\"username\"]){elem[\"tag\"]=\"not friend\";}else{elem[\"tag\"]=\"friend\";}});});searchedUser=searchedUser.filter(function(elem){return elem[\"tag\"]!==\"friend\";});setsearchList(friendlist.concat(searchedUser));};var friendTag=function friendTag(){friendlist.map(function(friend){friend[\"tag\"]=\"friend\";});setsearchList(friendlist);console.log(\"FEDN ls:\",friendlist);};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"navbar navbar-expand-sm w-100\",children:/*#__PURE__*/_jsx(\"form\",{action:\"\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"input-group input-group-sm m-2  float-start\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return _onChange(e);},id:\"searchbar\",className:\"form-control \",placeholder:\"Enter username\",\"aria-label\":\"Recipient's username\",\"aria-describedby\":\"searchbtn\"}),/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-outline-secondary btn-sm\",onClick:function onClick(e){return _onClick(e);},type:\"button\",id:\"searchbtn\",children:\"Search\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-group\",children:searchList===undefined?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{class:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"card-header\",children:\"ChatApp\"}),/*#__PURE__*/_jsx(\"div\",{class:\"card-body\",children:/*#__PURE__*/_jsxs(\"blockquote\",{class:\"blockquote mb-0\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"No Friends !\"}),/*#__PURE__*/_jsxs(\"footer\",{class:\"blockquote-footer\",children:[\" \",/*#__PURE__*/_jsx(\"cite\",{title:\"Source Title\",children:\"ADD FRIENDS\"})]})]})})]})}):searchItem==\"\"?friendlist.map(function(myfriend){console.log(\"in card iteration\");return/*#__PURE__*/_jsx(FriendCard,{friend:myfriend});}):searchList.map(function(myfriend){console.log(\"in card iteration\");return/*#__PURE__*/_jsx(FriendCard,{friend:myfriend});})})]});};var mapStateToProps=function mapStateToProps(state){console.log(state.profile);console.log(\"Auth : \",state.auth);console.log(\"=> \",state.friends);// console.log(state.friends[0])    \nreturn{friendlist_global:state.friends,groups_global:state.groups,searchedUser:state.friends.searchedUser,friendlist:state.friends.friendlist,user_name:state.profile.username// username:state.profile.username,\n//these are the variables passed as props globally tomaintain state of application\n};};export default connect(mapStateToProps,{get_searched_user_list:get_searched_user_list,get_friend_list:get_friend_list})(Friends);// export default Friends;\n/*\r\n/* export default connect(mapStateToProps, { del_friend })(Friends);**/","map":{"version":3,"sources":["D:/VSCode/SessionAuth/ChatApp/frontend/src/containers/Friends.js"],"names":["React","Fragment","useState","useEffect","get_searched_user_list","connect","get_friend_list","del_friend","FriendCard","Friends","searchedUser","friendlist","user_name","console","log","searchItem","setSearchItem","searchList","setsearchList","onChange","e","target","value","friendTag","deleteCommonElements","onClick","flag","length","list","filter","checkUsername","user","username","includes","map","elem","friend","concat","undefined","myfriend","mapStateToProps","state","profile","auth","friends","friendlist_global","groups_global","groups"],"mappings":"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","sourcesContent":["import React, { Fragment ,useState,useEffect} from \"react\";\r\nimport { get_searched_user_list } from '../actions/auth';\r\nimport { connect } from 'react-redux';\r\nimport { get_friend_list } from \"../actions/friends\";\r\nimport { del_friend } from '../actions/friends'\r\n// import { update_user_profile } from \"../actions/profile\";\r\n// import { delete_account } from \"../actions/auth\";\r\nimport '../styles/friends.css'\r\nimport FriendCard from \"./FriendCard\";\r\n\r\nconst Friends = ({get_searched_user_list,get_friend_list,searchedUser,friendlist,user_name}) => {\r\n\r\n    console.log(\"Searched User : \",searchedUser)\r\n\r\n\r\n    const [searchItem, setSearchItem] = useState(\"\")\r\n    const [searchList, setsearchList] = useState(friendlist)\r\n    const onChange = e => setSearchItem(e.target.value)\r\n\r\n    useEffect(()=>{\r\n        get_friend_list()   \r\n    },[]);\r\n    \r\n    useEffect(()=>{\r\n        setsearchList(friendlist)\r\n        friendTag()\r\n        console.log(\"DRUGS\")\r\n    },[friendlist])\r\n    \r\n    useEffect(()=>{\r\n        deleteCommonElements(friendlist,searchedUser);    \r\n    },searchedUser)\r\n\r\n    console.log(\"SearchList : \",searchList)\r\n    console.log(\"FriendList : \",friendlist)\r\n\r\n    const onClick = (e) => {\r\n        // Check in friend list\r\n        let flag = 0;\r\n        if(friendlist.length != 0){\r\n             // Check in friend list\r\n                let list = friendlist.filter(checkUsername)\r\n                if(list.length != 0){    \r\n                    setsearchList(list); \r\n                    flag = 1;\r\n                }\r\n                       \r\n                 \r\n        }\r\n        // Check in searched users list\r\n        if(searchedUser.length != 0 && flag === 0) {\r\n            let list = searchedUser.filter(checkUsername);\r\n            if(list.length != 0){    \r\n                setsearchList(list)\r\n                flag = 1;\r\n            }\r\n           \r\n        }\r\n        //Check all\r\n        if(flag == 0){\r\n           get_searched_user_list(searchItem)   \r\n        }        \r\n    }\r\n    const checkUsername = (user)=>{\r\n       return user.username.includes(searchItem)        \r\n    }\r\n\r\n    const deleteCommonElements = (friendlist,searchedUser) =>{\r\n            \r\n        searchedUser.map((elem)=>{\r\n            friendlist.map(friend=>{\r\n                if(friend[\"username\"] !== elem[\"username\"]){\r\n                    elem[\"tag\"] = \"not friend\"\r\n                }\r\n                else {\r\n                    elem[\"tag\"] = \"friend\"\r\n                }\r\n\r\n            })\r\n        })\r\n\r\n        searchedUser = searchedUser.filter((elem)=>{\r\n            return elem[\"tag\"] !== \"friend\"\r\n        })\r\n        \r\n            setsearchList(friendlist.concat(searchedUser))\r\n    \r\n                 \r\n    }\r\n      \r\n\r\n\r\n    const friendTag = ()=> {\r\n        friendlist.map((friend)=>{\r\n            friend[\"tag\"] = \"friend\"\r\n        })\r\n        setsearchList(friendlist)\r\n        console.log(\"FEDN ls:\",friendlist)\r\n    }\r\n    \r\n\r\n    return (\r\n        <Fragment>\r\n\r\n            <div className=\"navbar navbar-expand-sm w-100\">\r\n            <form action=\"\">\r\n                <div class=\"input-group input-group-sm m-2  float-start\">\r\n                    <input type=\"text\" onChange={e=>onChange(e)} id=\"searchbar\" className=\"form-control \" placeholder=\"Enter username\" aria-label=\"Recipient's username\" aria-describedby=\"searchbtn\"/>\r\n                    <button class=\"btn btn-outline-secondary btn-sm\" onClick={e => onClick(e)} type=\"button\" id=\"searchbtn\">Search</button>\r\n                </div>\r\n                \r\n            </form>\r\n            \r\n            </div>\r\n\r\n            <div className=\"card-group\" >\r\n                {searchList === undefined ? <>\r\n                    <div class=\"card\">\r\n                        <div class=\"card-header\">\r\n                            ChatApp\r\n                        </div>\r\n                        <div class=\"card-body\">\r\n                            <blockquote class=\"blockquote mb-0\">\r\n                                <h1>No Friends !</h1>\r\n                                <footer class=\"blockquote-footer\"> <cite title=\"Source Title\">ADD FRIENDS</cite></footer>\r\n                            </blockquote>\r\n                        </div>\r\n                    </div>\r\n                </> :\r\n                     searchItem == \"\" ?\r\n                        friendlist.map(\r\n                            (myfriend) => {\r\n                                console.log(\"in card iteration\")\r\n                                return (\r\n                                    <FriendCard friend={myfriend} />\r\n                                )\r\n                            }\r\n                        )\r\n                        :\r\n                        searchList.map(\r\n                            (myfriend) => {\r\n                                console.log(\"in card iteration\")\r\n                                return (\r\n                                    <FriendCard friend={myfriend} />\r\n                                )\r\n                            }\r\n                        )      \r\n                }\r\n            </div>\r\n        </Fragment>\r\n    );\r\n\r\n};\r\n\r\nconst mapStateToProps = state => {console.log(state.profile);\r\n\r\n    console.log(\r\n        \"Auth : \",state.auth\r\n    )\r\n    \r\n    console.log(\"=> \",state.friends)\r\n    // console.log(state.friends[0])    \r\n    return {\r\n    friendlist_global: state.friends,\r\n    groups_global: state.groups,\r\n    searchedUser:state.friends.searchedUser,\r\n    friendlist:state.friends.friendlist,\r\n    user_name:state.profile.username\r\n    // username:state.profile.username,\r\n    //these are the variables passed as props globally tomaintain state of application\r\n}}\r\nexport default connect(mapStateToProps,{get_searched_user_list,get_friend_list})(Friends);\r\n// export default Friends;\r\n/*\r\n/* export default connect(mapStateToProps, { del_friend })(Friends);**/\r\n\r\n"]},"metadata":{},"sourceType":"module"}