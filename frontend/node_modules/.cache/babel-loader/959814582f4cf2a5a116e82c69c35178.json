{"ast":null,"code":"import _regeneratorRuntime from\"D:/VSCode/SessionAuth/ChatApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/VSCode/SessionAuth/ChatApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{GET_NOTIFICATIONS_FAIL,GET_NOTIFICATIONS_SUCCESS,STORE_NOTIFICATIONS_FAIL,STORE_NOTIFICATIONS_SUCCESS}from'./types';import axios from'axios';import Cookies from'js-cookie';//GET FRIEND LIST\nexport var get_notification_list=function get_notification_list(username){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={headers:{'Accept':'application/json','Content-Type':'application/json'//'X-CSRFToken':Cookies.get('csrftoken') \n}};body=JSON.stringify({'username':username});_context.prev=2;_context.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/notification/getnotified\"),body,config);case 5:res=_context.sent;if(res.data.error){dispatch({type:GET_NOTIFICATIONS_FAIL});}else{dispatch({type:GET_NOTIFICATIONS_SUCCESS,payload:res.data});}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);dispatch({type:GET_NOTIFICATIONS_FAIL});case 12:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};//STORE FRIEND REQUEST\nexport var send_notification=function send_notification(username,receiver,status,info){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config={headers:{'Accept':'application/json','Content-Type':'application/json'//'X-CSRFToken':Cookies.get('csrftoken') \n}};body=JSON.stringify({'username':username,'receiver':receiver,'status':status,// sent ,accept and deny values\n'info':info});_context2.prev=2;_context2.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/notification/notify\"),body,config);case 5:res=_context2.sent;if(res.data.error){dispatch({type:STORE_NOTIFICATIONS_FAIL});}else{dispatch({type:STORE_NOTIFICATIONS_SUCCESS,payload:res.data});}_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);dispatch({type:GET_NOTIFICATIONS_FAIL});case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[2,9]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};","map":{"version":3,"sources":["D:/VSCode/SessionAuth/ChatApp/frontend/src/actions/notification.js"],"names":["GET_NOTIFICATIONS_FAIL","GET_NOTIFICATIONS_SUCCESS","STORE_NOTIFICATIONS_FAIL","STORE_NOTIFICATIONS_SUCCESS","axios","Cookies","get_notification_list","username","dispatch","config","headers","body","JSON","stringify","post","process","env","REACT_APP_API_URL","res","data","error","type","payload","send_notification","receiver","status","info"],"mappings":"uTAAA,OAAQA,sBAAR,CAA+BC,yBAA/B,CACQC,wBADR,CACiCC,2BADjC,KACmE,SADnE,CAEA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CAGA;AACA,MAAO,IAAMC,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAAEC,QAAF,iGAAc,iBAAMC,QAAN,sIAC7CC,MAD6C,CACpC,CACXC,OAAO,CAAG,CACN,SAAS,kBADH,CAEN,eAAe,kBACf;AAHM,CADC,CADoC,CAS7CC,IAT6C,CAStCC,IAAI,CAACC,SAAL,CAAe,CACzB,WAAWN,QADc,CAAf,CATsC,uCAe7BH,CAAAA,KAAK,CAACU,IAAN,WAAcC,OAAO,CAACC,GAAR,CAAYC,iBAA1B,8BAAuEN,IAAvE,CAA4EF,MAA5E,CAf6B,QAezCS,GAfyC,eAiB/C,GAAGA,GAAG,CAACC,IAAJ,CAASC,KAAZ,CAAmB,CACfZ,QAAQ,CAAC,CACLa,IAAI,CAACrB,sBADA,CAAD,CAAR,CAGH,CAJD,IAKK,CACDQ,QAAQ,CAAC,CACLa,IAAI,CAACpB,yBADA,CAELqB,OAAO,CAACJ,GAAG,CAACC,IAFP,CAAD,CAAR,CAKH,CA5B8C,+EA+B/CX,QAAQ,CAAC,CACLa,IAAI,CAACrB,sBADA,CAAD,CAAR,CA/B+C,oEAAd,gEAA9B,CAqCP;AACA,MAAO,IAAMuB,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAAEhB,QAAF,CAAWiB,QAAX,CAAoBC,MAApB,CAA2BC,IAA3B,kGAAmC,kBAAMlB,QAAN,0IAC9DC,MAD8D,CACrD,CACXC,OAAO,CAAG,CACN,SAAS,kBADH,CAEN,eAAe,kBACf;AAHM,CADC,CADqD,CAS9DC,IAT8D,CASvDC,IAAI,CAACC,SAAL,CAAe,CACzB,WAAWN,QADc,CAEzB,WAAWiB,QAFc,CAGxB,SAASC,MAHe,CAGP;AACjB,OAAOC,IAJiB,CAAf,CATuD,yCAmB9CtB,CAAAA,KAAK,CAACU,IAAN,WAAcC,OAAO,CAACC,GAAR,CAAYC,iBAA1B,yBAAkEN,IAAlE,CAAuEF,MAAvE,CAnB8C,QAmB1DS,GAnB0D,gBAqBhE,GAAGA,GAAG,CAACC,IAAJ,CAASC,KAAZ,CAAmB,CACfZ,QAAQ,CAAC,CACLa,IAAI,CAACnB,wBADA,CAAD,CAAR,CAGH,CAJD,IAKK,CACDM,QAAQ,CAAC,CACLa,IAAI,CAAClB,2BADA,CAELmB,OAAO,CAACJ,GAAG,CAACC,IAFP,CAAD,CAAR,CAIH,CA/B+D,mFAkChEX,QAAQ,CAAC,CACLa,IAAI,CAACrB,sBADA,CAAD,CAAR,CAlCgE,sEAAnC,kEAA1B","sourcesContent":["import {GET_NOTIFICATIONS_FAIL,GET_NOTIFICATIONS_SUCCESS,\r\n        STORE_NOTIFICATIONS_FAIL,STORE_NOTIFICATIONS_SUCCESS} from './types'\r\nimport axios from 'axios'\r\n\r\nimport Cookies from 'js-cookie';\r\n\r\n\r\n//GET FRIEND LIST\r\nexport const get_notification_list = ( username )=>async dispatch => {\r\nconst config = {\r\n    headers : {\r\n        'Accept':'application/json',\r\n        'Content-Type':'application/json',\r\n        //'X-CSRFToken':Cookies.get('csrftoken') \r\n    }\r\n};\r\n\r\nconst body = JSON.stringify({\r\n   'username':username,\r\n})\r\n\r\ntry {\r\n    \r\n    const res = await axios.post(`${process.env.REACT_APP_API_URL}/notification/getnotified`,body,config)\r\n\r\n    if(res.data.error) {\r\n        dispatch({\r\n            type:GET_NOTIFICATIONS_FAIL,\r\n        })\r\n    }\r\n    else {\r\n        dispatch({\r\n            type:GET_NOTIFICATIONS_SUCCESS,\r\n            payload:res.data\r\n        \r\n        })\r\n    }\r\n\r\n} catch (error) {\r\n    dispatch({\r\n        type:GET_NOTIFICATIONS_FAIL\r\n    })\r\n}\r\n}\r\n\r\n//STORE FRIEND REQUEST\r\nexport const send_notification = ( username,receiver,status,info )=>async dispatch => {\r\nconst config = {\r\n    headers : {\r\n        'Accept':'application/json',\r\n        'Content-Type':'application/json',\r\n        //'X-CSRFToken':Cookies.get('csrftoken') \r\n    }\r\n};\r\n\r\nconst body = JSON.stringify({\r\n   'username':username,\r\n   'receiver':receiver,\r\n    'status':status, // sent ,accept and deny values\r\n    'info':info\r\n\r\n})\r\n\r\ntry {\r\n    \r\n    const res = await axios.post(`${process.env.REACT_APP_API_URL}/notification/notify`,body,config)\r\n\r\n    if(res.data.error) {\r\n        dispatch({\r\n            type:STORE_NOTIFICATIONS_FAIL,\r\n        })\r\n    }\r\n    else {\r\n        dispatch({\r\n            type:STORE_NOTIFICATIONS_SUCCESS,\r\n            payload:res.data\r\n        })\r\n    }\r\n\r\n} catch (error) {\r\n    dispatch({\r\n        type:GET_NOTIFICATIONS_FAIL\r\n    })\r\n}\r\n}\r\n"]},"metadata":{},"sourceType":"module"}