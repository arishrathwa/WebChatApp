{"ast":null,"code":"import _regeneratorRuntime from\"D:/VSCode/SessionAuth/ChatApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/VSCode/SessionAuth/ChatApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/VSCode/SessionAuth/ChatApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{connect}from\"react-redux\";import{store_friend_connection}from\"../actions/friends\";import{send_notification}from\"../actions/notification\";import{get_notification_list}from\"../actions/notification\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Notification=function Notification(_ref){var notify_list=_ref.notify_list,username=_ref.username,store_friend_connection=_ref.store_friend_connection,send_notification=_ref.send_notification,get_notification_list=_ref.get_notification_list;var _useState=useState(notify_list),_useState2=_slicedToArray(_useState,2),notifyList=_useState2[0],setnotifyList=_useState2[1];useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setnotifyList(notify_list);case 1:case\"end\":return _context.stop();}}},_callee);})),[notifyList]);console.log(\"Not List : \",notifyList);console.log(\"noti list : \",notify_list);var _onClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e,sender,receiver,status){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return store_friend_connection(receiver,sender);case 2:_context2.next=4;return send_notification(sender,receiver,status,\"\");case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function onClick(_x,_x2,_x3,_x4){return _ref3.apply(this,arguments);};}();var onDeny=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e,sender,receiver,status){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return send_notification(sender,receiver,status,\"\");case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function onDeny(_x5,_x6,_x7,_x8){return _ref4.apply(this,arguments);};}();var getNotify=function getNotify(e){get_notification_list(username);};return/*#__PURE__*/_jsxs(Fragment,{className:\"nav-item\",children:[/*#__PURE__*/_jsx(Link,{className:\"nav-link \",type:\"\",\"data-bs-toggle\":\"offcanvas\",\"data-bs-target\":\"#offcanvasBottom\",onClick:function onClick(e){getNotify(e);},\"aria-controls\":\"offcanvasBottom\",children:\"Notifications\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"offcanvas offcanvas-end\",tabindex:\"-1\",id:\"offcanvasBottom\",\"aria-labelledby\":\"offcanvasBottomLabel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"offcanvas-header\",children:[/*#__PURE__*/_jsx(\"h5\",{id:\"offcanvasRightLabel\",children:\"Notifications\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-primary btn-sm\",onClick:function onClick(e){getNotify(username);},\"data-bs-dismiss\":\"offcanvas\",\"aria-label\":\"Close\",children:\"Refresh\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close text-reset\",\"data-bs-dismiss\":\"offcanvas\",\"aria-label\":\"Close\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"offcanvas-body small\",children:notify_list!==undefined?notify_list.map(function(notification){console.log(\"in card iteration\");return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{class:\"card\",style:\"width: 18rem;\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{class:\"card-title\",children:notification.sender}),/*#__PURE__*/_jsx(\"p\",{class:\"card-text\",children:notification.status}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-outline-primary btn-sm\",onClick:function onClick(e){_onClick(e,notification.sender,notification.receiver,\"accept\");},children:\"Accept\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-outline-danger btn-sm\",onClick:function onClick(e){onDeny(e,notification.sender,notification.receiver,\"deny\");},children:\"Deny X\"})]})})});}):\"No Notifications\"})]})]});};var mapStateToProps=function mapStateToProps(state){console.log(\"state noti : \",state.notifications.notify_list);return{notifications:state.notifications.notify_list,username:state.profile.username//these are the variables passed as props globally tomaintain state of application\n};};export default connect(mapStateToProps,{store_friend_connection:store_friend_connection,send_notification:send_notification,get_notification_list:get_notification_list})(Notification);","map":{"version":3,"sources":["D:/VSCode/SessionAuth/ChatApp/frontend/src/components/Notifications.js"],"names":["React","Fragment","useState","useEffect","Link","connect","store_friend_connection","send_notification","get_notification_list","Notification","notify_list","username","notifyList","setnotifyList","console","log","onClick","e","sender","receiver","status","onDeny","getNotify","undefined","map","notification","mapStateToProps","state","notifications","profile"],"mappings":"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","sourcesContent":["import React, { Fragment, useState,useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { store_friend_connection } from \"../actions/friends\";\r\nimport { send_notification } from \"../actions/notification\";\r\nimport { get_notification_list } from \"../actions/notification\";\r\nconst Notification = ({notify_list,username,store_friend_connection,send_notification,get_notification_list}) => {\r\n\r\n    const [notifyList, setnotifyList] = useState(notify_list)\r\n\r\n    useEffect(async ()=>{\r\n       setnotifyList(notify_list)\r\n    },[notifyList]);\r\n    console.log(\"Not List : \",notifyList)\r\n    console.log(\"noti list : \",notify_list);\r\n    const onClick = async (e,sender,receiver,status)=> {\r\n        await store_friend_connection(receiver,sender);\r\n        await send_notification(sender,receiver,status,\"\")\r\n\r\n    }\r\n    const onDeny = async(e,sender,receiver,status)=>{\r\n        await send_notification(sender,receiver,status,\"\")\r\n    }\r\n    const getNotify =  (e)=> {\r\n         get_notification_list(username);\r\n    }\r\n    return (\r\n        <Fragment className=\"nav-item\">\r\n            <Link className=\"nav-link \" type=\"\" data-bs-toggle=\"offcanvas\" data-bs-target=\"#offcanvasBottom\" onClick={(e)=>{getNotify(e)}} aria-controls=\"offcanvasBottom\">Notifications</Link>\r\n\r\n            <div className=\"offcanvas offcanvas-end\" tabindex=\"-1\" id=\"offcanvasBottom\" aria-labelledby=\"offcanvasBottomLabel\">\r\n                <div className=\"offcanvas-header\">\r\n                    <h5 id=\"offcanvasRightLabel\">Notifications</h5>\r\n                    <button type=\"button\" className=\"btn-primary btn-sm\" onClick={(e)=>{getNotify(username)}} data-bs-dismiss=\"offcanvas\" aria-label=\"Close\">Refresh</button>\r\n                    <button type=\"button\" className=\"btn-close text-reset\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"></button>\r\n                </div>\r\n                <div class=\"offcanvas-body small\">\r\n                {\r\n                    \r\n                notify_list !== undefined?  \r\n                notify_list.map(\r\n                        (notification) => {\r\n                            console.log(\"in card iteration\")\r\n                            return (\r\n                                <>\r\n                                <div class=\"card\" style=\"width: 18rem;\">\r\n                                    <div class=\"card-body\">\r\n                                        <h5 class=\"card-title\">{notification.sender}</h5>\r\n                                        <p class=\"card-text\">{notification.status}</p>\r\n                                        <button type=\"button\" class=\"btn btn-outline-primary btn-sm\" onClick={(e)=>{onClick(e,notification.sender,notification.receiver,\"accept\")}}>Accept</button>\r\n                                        <button type=\"button\" class=\"btn btn-outline-danger btn-sm\" onClick={(e)=>{onDeny(e,notification.sender,notification.receiver,\"deny\")}}>Deny X</button>\r\n                                    </div>\r\n                                </div>\r\n                                </>\r\n                                 )\r\n                            \r\n                        }\r\n                    ):\r\n                    \"No Notifications\"\r\n                    }      \r\n                </div>\r\n            </div>\r\n                    \r\n\r\n        </Fragment>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    console.log(\"state noti : \",state.notifications.notify_list)\r\n    return {\r\n    notifications:state.notifications.notify_list,\r\n    username:state.profile.username\r\n    //these are the variables passed as props globally tomaintain state of application\r\n}}\r\n\r\nexport default connect(mapStateToProps,{store_friend_connection,send_notification,get_notification_list})(Notification);"]},"metadata":{},"sourceType":"module"}