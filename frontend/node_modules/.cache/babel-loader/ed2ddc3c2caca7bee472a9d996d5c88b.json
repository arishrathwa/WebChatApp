{"ast":null,"code":"import _regeneratorRuntime from\"D:/VSCode/SessionAuth/ChatApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/VSCode/SessionAuth/ChatApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';//For making API requests and handle responses like fetch api\nimport{REGISTER_SUCCESS,REGISTER_FAIL,LOGIN_FAIL,LOGIN_SUCCESS,LOGOUT_FAIL,LOGOUT_SUCCESS}from'../actions/types';import Cookies from'js-cookie';export var login=function login(username,password){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':Cookies.get('csrftoken')}};body=JSON.stringify({username:username,password:password});_context.prev=2;_context.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/accounts/login\"),body,config);case 5:res=_context.sent;if(res.data.error){dispatch({type:LOGIN_FAIL});}else{dispatch({type:LOGIN_SUCCESS,payload:res.data.username});//load the user action dispatch after this\n}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);dispatch({type:LOGIN_FAIL});case 12:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};//REGISTER\nexport var register=function register(username,password,re_password){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config={headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':Cookies.get('csrftoken')}};body=JSON.stringify({username:username,password:password,re_password:re_password});_context2.prev=2;_context2.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/accounts/register\"),body,config);case 5:res=_context2.sent;if(res.data.error){dispatch({type:REGISTER_FAIL});}else{dispatch({type:REGISTER_SUCCESS});}_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);dispatch({type:'REGISTER_FAIL'});case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[2,9]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};//LOGOUT\nexport var logout=function logout(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var config,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:config={headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':Cookies.get('csrftoken')}};_context3.prev=1;_context3.next=4;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/accounts/logout\"),config);case 4:res=_context3.sent;if(res.data.error){dispatch({type:LOGOUT_FAIL});}else{dispatch({type:LOGOUT_SUCCESS});//load the user action dispatch after this\n}_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);dispatch({type:LOGOUT_FAIL});case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[1,8]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};","map":{"version":3,"sources":["D:/VSCode/SessionAuth/ChatApp/frontend/src/actions/auth.js"],"names":["axios","REGISTER_SUCCESS","REGISTER_FAIL","LOGIN_FAIL","LOGIN_SUCCESS","LOGOUT_FAIL","LOGOUT_SUCCESS","Cookies","login","username","password","dispatch","config","headers","get","body","JSON","stringify","post","process","env","REACT_APP_API_URL","res","data","error","type","payload","register","re_password","logout"],"mappings":"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","sourcesContent":["import axios from 'axios' //For making API requests and handle responses like fetch api\r\nimport { REGISTER_SUCCESS,REGISTER_FAIL,\r\n            LOGIN_FAIL,LOGIN_SUCCESS,\r\n            LOGOUT_FAIL,LOGOUT_SUCCESS } from '../actions/types'\r\nimport Cookies from 'js-cookie'\r\n\r\n\r\nexport const login = (username,password) => async dispatch => {\r\n    const config = {\r\n        headers : {\r\n            'Accept':'application/json',\r\n            'Content-Type':'application/json',\r\n            'X-CSRFToken':Cookies.get('csrftoken')\r\n        }\r\n    };\r\n    \r\n    const body = JSON.stringify({username,password})\r\n\r\n    try {\r\n        \r\n        const res = await axios.post(`${process.env.REACT_APP_API_URL}/accounts/login`,body,config)\r\n\r\n        if(res.data.error) {\r\n            dispatch({\r\n                type:LOGIN_FAIL\r\n            })\r\n        }\r\n        else {\r\n            dispatch({\r\n                type:LOGIN_SUCCESS,\r\n                payload:res.data.username\r\n            });\r\n            \r\n            //load the user action dispatch after this\r\n        }\r\n\r\n    } catch (error) {\r\n        dispatch({\r\n            type:LOGIN_FAIL\r\n        })\r\n    }\r\n\r\n}\r\n//REGISTER\r\nexport const register = (username,password,re_password) => async dispatch => {\r\n\r\n    const config = {\r\n        headers : {\r\n            'Accept':'application/json',\r\n            'Content-Type':'application/json',\r\n            'X-CSRFToken':Cookies.get('csrftoken')\r\n        }\r\n    };\r\n    const body = JSON.stringify({username,password,re_password})\r\n\r\n    try {\r\n\r\n        const res = await axios.post(`${process.env.REACT_APP_API_URL}/accounts/register`,body,config);\r\n\r\n        if(res.data.error) {\r\n            dispatch({\r\n                type:REGISTER_FAIL\r\n            });\r\n        }else {\r\n            dispatch({\r\n                type:REGISTER_SUCCESS\r\n            });\r\n        }\r\n\r\n    }catch(err){\r\n        dispatch({\r\n            type:'REGISTER_FAIL'\r\n        });\r\n    }\r\n\r\n} \r\n\r\n//LOGOUT\r\nexport const logout = () => async dispatch => {\r\n    const config = {\r\n        headers : {\r\n            'Accept':'application/json',\r\n            'Content-Type':'application/json',\r\n            'X-CSRFToken':Cookies.get('csrftoken')\r\n        }\r\n    };\r\n    \r\n    \r\n\r\n    try {\r\n        \r\n        const res = await axios.post(`${process.env.REACT_APP_API_URL}/accounts/logout`,config)\r\n\r\n        if(res.data.error) {\r\n            dispatch({\r\n                type:LOGOUT_FAIL\r\n            })\r\n        }\r\n        else {\r\n            dispatch({\r\n                type:LOGOUT_SUCCESS,\r\n            });\r\n            \r\n            //load the user action dispatch after this\r\n        }\r\n\r\n    } catch (error) {\r\n        dispatch({\r\n            type:LOGOUT_FAIL\r\n        })\r\n    }\r\n\r\n}"]},"metadata":{},"sourceType":"module"}