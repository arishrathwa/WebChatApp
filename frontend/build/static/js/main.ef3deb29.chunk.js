(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{38:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(24),s=n.n(r),o=n(5),i=n(8),l=n(6),d=n(3),u=n.n(d),b=n(7),j=n(10),p=n.n(j),f="REGISTER_SUCCESS",h="REGISTER_FAIL",m="LOGIN_SUCCESS",O="LOGIN_FAIL",x="LOGOUT_SUCCESS",g="LOGOUT_FAIL",v="AUTHENTICATED_SUCCESS",y="AUTHENTICATED_FAIL",N="LOAD_USER_PROFILE_SUCCESS",S="LOAD_USER_PROFILE_FAIL",k="UPDATE_USER_PROFILE_SUCCESS",_="UPDATE_USER_PROFILE_FAIL",C="DELETE_USER_SUCCESS",w="DELETE_USER_FAIL",E="GET_FRIENDS_SUCCESS",A="GET_FRIENDS_FAIL",F="GET_SEARCHED_FRIENDS_SUCCESS",T="GET_SEARCHED_FRIENDS_FAIL",R="ADD_FRIEND_SUCCESS",I="ADD_FRIEND_FAIL",D="FEEDBACK_SEND_FAIL",U="FEEDBACK_SEND_SUCCESS",L="GET_NOTIFICATIONS_FAIL",P="GET_NOTIFICATIONS_SUCCESS",G=n(11),J=n.n(G),X=function(){return function(){var e=Object(b.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Accept:"application/json","Content-Type":"application/json"}},e.prev=1,e.next=4,p.a.get("".concat("http://localhost:8000","/profile/user"),n);case 4:(a=e.sent).data.error?t({type:S}):t({type:N,payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:S});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},B=n(17),q=n(2),M=n(9),W=n(0),H=Object(l.b)(null,{sendFeedback:function(e,t){return function(){var n=Object(b.a)(u.a.mark((function n(a){var c,r,s;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":J.a.get("csrftoken")}},r=JSON.stringify({feedback:e,sender:t}),n.prev=2,n.next=5,p.a.post("".concat("http://localhost:8000","/accounts/feedback"),r,c);case 5:(s=n.sent).data.error?a({type:D}):(alert(s.data.success),a({type:U}),a(X())),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),a({type:O});case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.sendFeedback,n=Object(a.useState)({sender:"",feedback:""}),c=Object(M.a)(n,2),r=c[0],s=c[1],i=function(e){return s(Object(q.a)(Object(q.a)({},r),{},Object(B.a)({},e.target.name,e.target.value)))},l=r.sender,d=r.feedback;return Object(W.jsxs)(a.Fragment,{className:"nav-item",children:[Object(W.jsx)(o.b,{className:"nav-link ",type:"","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",children:"Feedback"}),Object(W.jsxs)("div",{className:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel",children:[Object(W.jsxs)("div",{className:"offcanvas-header",children:[Object(W.jsx)("h5",{id:"offcanvasRightLabel",children:"Feedback"}),Object(W.jsx)("button",{type:"button",className:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})]}),Object(W.jsx)("div",{class:"offcanvas-body",children:Object(W.jsxs)("form",{onSubmit:function(e){!function(e){e.preventDefault();try{console.log(l),console.log(d),t(d,l)}catch(n){}}(e)},children:[Object(W.jsx)("label",{htmlFor:"sender",children:"Name : "}),Object(W.jsx)("input",{type:"text",className:"form-control mt-3",onChange:function(e){i(e)},name:"sender"}),Object(W.jsx)("label",{htmlFor:"feedback",children:"Message : "}),Object(W.jsx)("textarea",{className:"form-control mt-3",onChange:function(e){i(e)},name:"feedback",cols:"30",rows:"10"}),Object(W.jsx)("button",{type:"submit",className:"btn btn-primary mt-4",children:"Submit"})]})})]})]})})),K=function(e,t,n,a){return function(){var c=Object(b.a)(u.a.mark((function c(r){var s,o,i;return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s={headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":J.a.get("csrftoken")}},o=JSON.stringify(Object(B.a)({sender:e,receiver:t,status:n,info:a},"sender",e)),console.log("SENDER : ",o.sender),c.prev=3,c.next=6,p.a.post("".concat("http://localhost:8000","/notification/notify"),o,s);case 6:(i=c.sent).data.error?r({type:"STORE_NOTIFICATIONS_FAIL"}):r({type:"STORE_NOTIFICATIONS_SUCCESS",payload:i.data}),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(3),r({type:L});case 13:case"end":return c.stop()}}),c,null,[[3,10]])})));return function(e){return c.apply(this,arguments)}}()},V=Object(l.b)((function(e){return console.log("state noti : ",e.notifications),console.log(e.notifications.notify_list),{notifications:e.notifications.notify_list,username:e.profile.username}}),{store_friend_connection:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(){var c=Object(b.a)(u.a.mark((function c(r){var s,o;return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s={headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":J.a.get("csrftoken")}},o=JSON.stringify({user:e,friend_username:t,status:n,connectionid:a}),console.log("info : inreq : ",a),c.prev=3,c.next=6,p.a.post("".concat("http://localhost:8000","/friends/addfriend"),o,s);case 6:c.sent.data.error?r({type:I}):r({type:R}),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(3),r({type:I});case 13:case"end":return c.stop()}}),c,null,[[3,10]])})));return function(e){return c.apply(this,arguments)}}()},send_notification:K,get_notification_list:function(e){return function(){var t=Object(b.a)(u.a.mark((function t(n){var a,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":J.a.get("csrftoken")}},c=JSON.stringify({username:e}),t.prev=2,t.next=5,p.a.post("".concat("http://localhost:8000","/notification/getnotified"),c,a);case 5:r=t.sent,console.log("Nsot : ",r.data),r.data.error?n({type:L}):n({type:P,payload:r.data}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),n({type:L});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.notifications,n=e.username,c=e.store_friend_connection,r=e.send_notification,s=e.get_notification_list,i=Object(a.useState)([]),l=Object(M.a)(i,2),d=l[0];l[1];console.log("Not List : ",d),console.log("noti list : ",t);var j=function(){var e=Object(b.a)(u.a.mark((function e(t,n,a,s,o){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("accept"!=s&&"done"!=s){e.next=5;break}return e.next=3,c(a,n,s,o);case 3:e.next=7;break;case 5:return e.next=7,r(n,a,s,"");case 7:console.log("info : ",o);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a,c,r){return e.apply(this,arguments)}}(),p=function(){var e=Object(b.a)(u.a.mark((function e(t,n,a,c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(n,a,c,"");case 2:case"end":return e.stop()}}),e)})));return function(t,n,a,c){return e.apply(this,arguments)}}(),f=function(e){s(n)};return Object(W.jsxs)(a.Fragment,{className:"nav-item",children:[Object(W.jsx)(o.b,{className:"nav-link ",type:"","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasBottom",onClick:function(e){f()},"aria-controls":"offcanvasBottom",children:"Notifications"}),Object(W.jsxs)("div",{className:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasBottom","aria-labelledby":"offcanvasBottomLabel",children:[Object(W.jsxs)("div",{className:"offcanvas-header",children:[Object(W.jsx)("h5",{id:"offcanvasRightLabel",children:"Notifications"}),Object(W.jsx)("button",{type:"button",className:"btn-primary btn-sm",onClick:function(e){f()},"data-bs-dismiss":"offcanvas","aria-label":"Close",children:"Refresh"}),Object(W.jsx)("button",{type:"button",className:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})]}),Object(W.jsx)("div",{class:"offcanvas-body small",children:0!==t.length?t.map((function(e){return console.log("in card iteration"),Object(W.jsx)(W.Fragment,{children:Object(W.jsx)("div",{class:"card",children:Object(W.jsxs)("div",{class:"card-body",children:[Object(W.jsx)("h5",{class:"card-title",children:e.sender}),Object(W.jsx)("p",{class:"card-text",children:e.status}),"sent"===e.request?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(t){j(t,e.sender,e.receiver,"accept")},children:"Accept"}),Object(W.jsx)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){p(t,e.sender,e.receiver,"deny")},children:"Deny X"})]}):Object(W.jsx)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(t){j(t,e.sender,e.receiver,"done",e.info)},children:"Confirm"})]})})})})):Object(W.jsx)(W.Fragment,{children:Object(W.jsx)("div",{class:"card",children:Object(W.jsx)("div",{class:"card-body",children:"No Notifications.."})})})})]})]})})),z=Object(l.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,username:e.profile.username}}),{logout:function(e){return function(){var t=Object(b.a)(u.a.mark((function t(n){var a,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":"".concat(J.a.get("csrftoken"))}},console.log("logout wala : ",e),c=JSON.stringify({withCredentials:!0,username:e}),t.prev=3,t.next=6,p.a.post("".concat("http://localhost:8000","/accounts/logout"),c,a);case 6:t.sent.data.error?n({type:g}):n({type:x}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),n({type:g});case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.isAuthenticated,n=e.logout,c=e.chatState,r=e.username,s=Object(W.jsxs)(a.Fragment,{children:[Object(W.jsx)("li",{className:"nav-item",children:Object(W.jsx)(o.c,{className:"nav-link",exact:!0,to:"/login",children:"Login"})}),Object(W.jsx)("li",{className:"nav-item",children:Object(W.jsx)(o.c,{className:"nav-link",exact:!0,to:"/register",children:"Register"})})]}),i=Object(W.jsx)(a.Fragment,{children:Object(W.jsx)("li",{className:"nav-item",children:Object(W.jsx)(V,{className:"nav-link"})})}),l=Object(W.jsx)(a.Fragment,{children:Object(W.jsxs)("ul",{className:"nav nav-pills nav-fill float-end d-flex align-self-start",children:[Object(W.jsx)("li",{className:"nav-item",children:Object(W.jsx)(o.c,{className:"nav-link ",onClick:function(){console.log("Clicked")},exact:!0,to:"/friends",children:"Friends"})}),Object(W.jsxs)("li",{className:"nav-item btn-group btn-group-sm",children:[Object(W.jsx)("button",{type:"button",class:"btn btn-light",children:r}),Object(W.jsx)("button",{type:"button",class:"btn btn-light dropdown-toggle dropdown-toggle-split",id:"dropdownMenuReference","data-bs-toggle":"dropdown","aria-expanded":"false","data-bs-reference":"parent",children:Object(W.jsx)("span",{class:"visually-hidden",children:"Toggle Dropdown"})}),Object(W.jsxs)("ul",{class:"dropdown-menu dropdown-menu-end dropdown-menu-light","aria-labelledby":"dropdownMenuReference",children:[Object(W.jsx)("li",{children:Object(W.jsx)(o.c,{className:"dropdown-item",onClick:c,exact:!0,to:"/chats",children:"Profile"})}),Object(W.jsx)("li",{children:Object(W.jsx)(o.c,{className:"dropdown-item",onClick:c,exact:!0,to:"/dashboard",children:"Update Profile"})}),Object(W.jsx)("li",{children:Object(W.jsx)("a",{className:"dropdown-item",onClick:function(e){!function(e){e.preventDefault(),console.log("Onclick wala : ",r),n(r)}(e)},href:"#!",children:"Logout"})}),Object(W.jsx)("li",{children:Object(W.jsx)("hr",{className:"dropdown-divider"})}),Object(W.jsx)("li",{})]})]})]})});return Object(W.jsxs)("nav",{className:"navbar navbar-expand-sm navbar-light  bg-light",children:[Object(W.jsxs)("div",{className:"container-fluid w-25",style:{marginLeft:"3px"},children:[Object(W.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav",children:Object(W.jsx)("span",{className:"navbar-toggler-icon"})}),Object(W.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(W.jsxs)("ul",{className:"navbar-nav",children:[Object(W.jsx)(o.b,{className:"navbar-brand",exact:!0,to:"/",children:"Chatter-Box"}),Object(W.jsx)("li",{className:"nav-item",children:Object(W.jsx)(o.c,{className:"nav-link",exact:!0,to:"/",children:"Home"})}),Object(W.jsx)("div",{children:t}),t?i:s,Object(W.jsx)("li",{className:"nav-item",children:Object(W.jsx)(H,{className:"nav-link"})})]})})]}),t?l:""]})})),Q=Object(l.b)(null,{checkAuthenticated:function(){return function(){var e=Object(b.a)(u.a.mark((function e(t){var n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":"".concat(J.a.get("csrftoken"))}},a=JSON.stringify({}),e.prev=2,e.next=5,p.a.get("".concat("http://localhost:8000","/accounts/authenticated"),a,n);case 5:(c=e.sent).data.error||"error"===c.data.isAuthenticated?t({type:y,payload:!1}):"success"===c.data.isAuthenticated?t({type:v,payload:!0}):t({type:y,payload:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t({type:y,payload:!1});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},load_user:X})((function(e){var t=e.children,n=e.checkAuthenticated,c=e.load_user;Object(a.useEffect)((function(){n(),c()}),[]);return Object(W.jsxs)(a.Fragment,{children:[Object(W.jsx)(z,{design:{maxWidth:"20rem",boxShadow:"none"}}),t]})})),Y=function(){return Object(W.jsx)("div",{className:"container",children:Object(W.jsxs)("div",{className:"mt-5 p-5 bg-light",children:[Object(W.jsx)("h1",{className:"display-4",children:"Welcome to the ChatApp"}),Object(W.jsx)("p",{className:"lead",children:"This is wonderful application to Chat.."}),Object(W.jsx)("hr",{className:"my-4"}),Object(W.jsx)("p",{children:"Click the button below to Login"}),Object(W.jsx)(o.b,{className:"btn btn-primary btn-lg",exact:!0,to:"/login",children:"Login"})]})})},Z=function(){var e=Object(a.useState)(""),t=Object(M.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("".concat("http://localhost:8000","/accounts/csrf_cookie"));case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();e(),c(function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var c=n[a].trim();if(c.substring(0,e.length+1)===e+"="){t=decodeURIComponent(c.substring(e.length+1));break}}return console.log("IN CSRF : "+t),t}("csrftoken"))}),[]),Object(W.jsx)("input",{type:"hidden",name:"csrfmiddlewaretoken",value:n})},$=Object(l.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{register:function(e,t,n){return function(){var a=Object(b.a)(u.a.mark((function a(c){var r,s;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(J.a.get("csrftoken")),r={headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":"".concat(J.a.get("csrftoken"))}},s=JSON.stringify({username:e,password:t,re_password:n}),a.prev=3,a.next=6,p.a.post("".concat("http://localhost:8000","/accounts/register"),s,r);case 6:a.sent.data.error?c({type:h}):c({type:f}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(3),c({type:h});case 13:case"end":return a.stop()}}),a,null,[[3,10]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.register,n=e.isAuthenticated,c=Object(a.useState)({username:"",password:"",re_password:""}),r=Object(M.a)(c,2),s=r[0],l=r[1],d=Object(a.useState)(!1),u=Object(M.a)(d,2),b=u[0],j=u[1],p=s.username,f=s.password,h=s.re_password,m=function(e){return l(Object(q.a)(Object(q.a)({},s),{},Object(B.a)({},e.target.name,e.target.value)))};return n?Object(W.jsx)(i.a,{exact:!0,to:"/dashboard"}):b?Object(W.jsx)(i.a,{exact:!0,to:"/login"}):Object(W.jsxs)("div",{className:"container",children:[Object(W.jsx)("h1",{children:"Register for an Account"}),Object(W.jsx)("p",{children:"Enter your profile info.."}),Object(W.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),f===h&&(t(p,f,h),j(!0))}(e)},children:[Object(W.jsx)(Z,{}),Object(W.jsxs)("div",{className:"form-group mt-3",children:[Object(W.jsx)("label",{htmlFor:"username",className:"form-label",children:"Username:"}),Object(W.jsx)("input",{type:"text",className:"form-control",placeholder:"Username",name:"username",id:"username",value:p,onChange:function(e){return m(e)},required:!0})]}),Object(W.jsxs)("div",{className:"form-group mt-3",children:[Object(W.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password:"}),Object(W.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",name:"password",id:"password",value:f,onChange:function(e){return m(e)},minLength:"6",required:!0})]}),Object(W.jsxs)("div",{className:"form-group mt-3",children:[Object(W.jsx)("label",{htmlFor:"re_password",className:"form-label",children:"Confirm Password:"}),Object(W.jsx)("input",{type:"password",className:"form-control",placeholder:"Confirm Password",name:"re_password",id:"re_password",value:h,onChange:function(e){return m(e)},minLength:"6",required:!0})]}),Object(W.jsx)("button",{className:"btn btn-primary mt-3",type:"submit",children:"Register"})]}),Object(W.jsxs)("p",{className:"mt-3",children:["Already have an account? ",Object(W.jsx)(o.b,{exact:!0,to:"/login",children:"Sign In"})]})]})})),ee=Object(l.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var n=Object(b.a)(u.a.mark((function n(a){var c,r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":J.a.get("csrftoken")}},r=JSON.stringify({username:e,password:t}),n.prev=2,n.next=5,p.a.post("".concat("http://localhost:8000","/accounts/login"),r,c);case 5:n.sent.data.error?a({type:O}):(a({type:m}),a(X())),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),a({type:O});case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.login,n=e.isAuthenticated,c=Object(a.useState)({username:"",password:""}),r=Object(M.a)(c,2),s=r[0],l=r[1],d=s.username,u=s.password,b=function(e){return l(Object(q.a)(Object(q.a)({},s),{},Object(B.a)({},e.target.name,e.target.value)))};return n?Object(W.jsx)(i.a,{exact:!0,to:"/friends"}):Object(W.jsxs)("div",{className:"container",children:[Object(W.jsx)("h1",{children:"Sign In"}),Object(W.jsx)("p",{children:"To your ChatApp"}),Object(W.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),u.length>6&&t(d,u)}(e)},children:[Object(W.jsx)(Z,{}),Object(W.jsxs)("div",{className:"form-group mt-3",children:[Object(W.jsx)("label",{htmlFor:"username",className:"form-label",children:"Username:"}),Object(W.jsx)("input",{type:"text",className:"form-control",placeholder:"Username",name:"username",id:"username",value:d,onChange:function(e){return b(e)},required:!0})]}),Object(W.jsxs)("div",{className:"form-group mt-3",children:[Object(W.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password:"}),Object(W.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",name:"password",id:"password",value:u,onChange:function(e){return b(e)},minLength:"6",required:!0})]}),Object(W.jsx)("button",{className:"btn btn-primary mt-3",type:"submit",children:"Sign In"})]}),Object(W.jsxs)("p",{className:"mt-3",children:["Don't have an account? ",Object(W.jsx)(o.b,{exact:!0,to:"/register",children:"Sign Up"})]})]})})),te=Object(l.b)((function(e){return{username:e.profile.username,first_name_global:e.profile.first_name,last_name_global:e.profile.last_name,phone_global:e.profile.phone,city_global:e.profile.city}}),{delete_account:function(){return function(){var e=Object(b.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Arrived"),n={headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":"".concat(J.a.get("csrftoken"))}},console.log(J.a.get("csrftoken")),a=JSON.stringify({withCredentials:!0}),e.prev=4,e.next=7,p.a.post("".concat("http://localhost:8000","/accounts/delete"),a,n);case 7:e.sent.data.success?t({type:C}):t({type:w}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t({type:w});case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()},update_user_profile:function(e,t,n,a){return function(){var c=Object(b.a)(u.a.mark((function c(r){var s,o,i;return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return console.log("yaha aya tha.."),s={headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":J.a.get("csrftoken")}},o=JSON.stringify({withCredentials:!0,first_name:e,last_name:t,phone:n,city:a}),c.prev=3,c.next=6,p.a.put("".concat("http://localhost:8000","/profile/update"),o,s);case 6:(i=c.sent).data.profile&&i.data.username?r({type:k,payload:i.data}):r({type:_}),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(3),r({type:_});case 13:case"end":return c.stop()}}),c,null,[[3,10]])})));return function(e){return c.apply(this,arguments)}}()}})((function(e){var t=e.delete_account,n=e.update_user_profile,c=e.first_name_global,r=e.last_name_global,s=e.phone_global,o=e.city_global,i=Object(a.useState)({first_name:"",last_name:"",phone:"",city:""}),l=Object(M.a)(i,2),d=l[0],u=l[1],b=d.first_name,j=d.last_name,p=d.phone,f=d.city;Object(a.useEffect)((function(){u({first_name:c,last_name:r,phone:s,city:o})}),[c,r,s,o]);var h=function(e){return u(Object(q.a)(Object(q.a)({},d),{},Object(B.a)({},e.target.name,e.target.value)))};return Object(W.jsxs)("div",{className:"container",children:[Object(W.jsx)("h1",{className:"mt-3",children:"Welcome to User Dashboard"}),Object(W.jsx)("p",{className:"mt-3 mb-3",children:"Update User Profiel Below.."}),Object(W.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),n(b,j,p,f)}(e)},children:[Object(W.jsxs)("div",{className:"form-group mt-3",children:[Object(W.jsx)("label",{htmlFor:"first_name",children:"First Name:"}),Object(W.jsx)("input",{className:"form-control",type:"text",name:"first_name",placeholder:c,onChange:function(e){return h(e)},value:b})]}),Object(W.jsxs)("div",{className:"form-group mt-3",children:[Object(W.jsx)("label",{htmlFor:"last_name",children:"Last Name:"}),Object(W.jsx)("input",{className:"form-control",type:"text",name:"last_name",placeholder:r,onChange:function(e){return h(e)},value:j})]}),Object(W.jsxs)("div",{className:"form-group mt-3",children:[Object(W.jsx)("label",{htmlFor:"phone",children:"Phone:"}),Object(W.jsx)("input",{className:"form-control",type:"number",name:"phone",placeholder:s,onChange:function(e){return h(e)},value:p})]}),Object(W.jsxs)("div",{className:"form-group mt-3",children:[Object(W.jsx)("label",{htmlFor:"city",children:"City:"}),Object(W.jsx)("input",{className:"form-control",type:"text",name:"city",placeholder:o,onChange:function(e){return h(e)},value:f})]}),Object(W.jsx)("button",{className:"btn btn-primary mt-3",type:"submit",children:"Update"})]}),Object(W.jsx)("p",{className:"mt-5",children:"Click the button below to delete your User Account : "}),Object(W.jsx)("a",{className:"btn btn-danger",href:"#!",onClick:t,children:"Delete Account"})]})})),ne=n(45),ae=n(41),ce=n(42);console.log("GREAT DEAl");var re=0,se=function(){function e(){Object(ae.a)(this,e)}return Object(ce.a)(e,null,[{key:"setChatSocket",value:function(t){e.chatSocket=t,e.chatSocket.onopen=function(t){console.log("OPENDED SOCKET GATE"),e.socketState=!0}}}]),e}();se.chatSocket={},se.socketState=!1;var oe=Object(l.b)("",{})((function(e){e.title,e.onDelete,e.params;var t=Object(i.f)();console.log("PARAMS : ",t.params);var n=Object(a.useState)(t.params),c=Object(M.a)(n,2),r=c[0];c[1];console.log("count : ",re++);var s=r.connectionid,l=Object(a.useState)(se.socketState),d=Object(M.a)(l,2),u=d[0],b=d[1];console.log("Socket State : ",u),Object(a.useEffect)((function(){b(!u)}),[se.socketState]);var j=r.username;Object(a.useLayoutEffect)((function(){se.setChatSocket(new WebSocket("ws://"+window.location.host+"/ws/chat/"+s+"/"))}),[]);var p=Object(a.useState)([]),f=Object(M.a)(p,2),h=f[0],m=f[1],O=Object(a.useState)(""),x=Object(M.a)(O,2),g=x[0],v=x[1];console.log("TextValue : ",g),console.log("ChatItems : ",h),se.chatSocket.onopen=function(e){console.log("CHat Socket Open..")},se.chatSocket.onmessage=function(e){var t=JSON.parse(e.data);console.log("Receiving end : ",t),m((function(e){return[].concat(Object(ne.a)(e),[t])})),e.stopPropagation()},se.chatSocket.onclose=function(e){console.error("Chat socket closed unexpectedly"),i.a};return Object(W.jsx)(a.Fragment,{children:Object(W.jsxs)("div",{className:"container-fluid p-2 mx-auto",children:[Object(W.jsx)("nav",{class:"navbar navbar-dark bg-primary",children:Object(W.jsxs)("div",{class:"container-fluid",children:[Object(W.jsx)(o.c,{className:"btn btn-light",onClick:function(){se.chatSocket.close()},exact:!0,to:"/friends",children:"Back"}),Object(W.jsx)("h3",{children:r.friend})]})}),Object(W.jsx)("div",{className:"overflow-auto",children:0!==h.length?h.map((function(e){return Object(W.jsx)(W.Fragment,{children:e.sender===r.username?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("div",{className:"container-fluid mx-auto d-inline-flex justify-content-end w-100",children:Object(W.jsxs)("div",{class:"card  mt-1",style:{"max-width":"20rem"},children:[Object(W.jsxs)("div",{class:"card-body",children:[Object(W.jsx)("h5",{class:"card-title",children:e.sender}),Object(W.jsx)("p",{class:"card-text",children:e.message})]}),Object(W.jsx)("button",{type:"button",className:"btn btn-sm btn-danger",children:"Mark Fake"})]})}),Object(W.jsx)("br",{})]}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("div",{className:"container-fluid mx-auto d-inline-flex justify-content-start w-100",children:Object(W.jsxs)("div",{class:"card  mt-1 ",style:{"max-width":"20rem"},children:[Object(W.jsxs)("div",{class:"card-body",children:[Object(W.jsx)("h5",{class:"card-title",children:e.sender}),Object(W.jsx)("p",{class:"card-text",children:e.message})]}),Object(W.jsx)("button",{type:"button",className:"btn btn-sm btn-danger",children:"Mark Fake"})]})}),Object(W.jsx)("br",{})]})})})):"No Messages"}),Object(W.jsx)("nav",{class:"navbar fixed-bottom navbar-light bg-light",children:Object(W.jsxs)("div",{class:"container-fluid  flex-row justify-content-center",children:[Object(W.jsx)("input",{type:"text",id:"chat-message-submit",onChange:function(e){return function(e){v(e.target.value),e.stopPropagation()}(e)},className:"form-control mw-100"}),Object(W.jsx)("a",{class:"btn btn-success",onClick:function(e){return function(e){var t=g;j=r.username,se.chatSocket.send(JSON.stringify({message:t,sender:j,connectionid:r.connectionid})),console.log("MESSAGE SENT : ",t," SENDER : ",j),e.stopPropagation()}(e)},href:"#",children:"Send"})]})})]})})})),ie=(n(38),Object(l.b)((function(e){return{username:e.profile.username}}),{send_notification:K})((function(e){var t=e.friend,n=e.onDelete,a=e.username,c=e.send_notification,r=e.tag;return console.log("SENDER : ",a),console.log("FREND : ",t),console.log("friend : ",t.username),console.log("TAG : ",r),Object(W.jsx)(W.Fragment,{children:Object(W.jsxs)("div",{className:"card d-flex border border-dark m-2",style:{minWidth:"15rem",maxWidth:"20rem"},children:[Object(W.jsx)("div",{className:"card-header border-success",children:t.friend}),Object(W.jsxs)("div",{className:"card-body text-dark",children:[Object(W.jsx)("h5",{className:"card-title",children:"Task"}),Object(W.jsx)("p",{className:"card-text",children:"Busy"})]}),Object(W.jsxs)("div",{className:"card-footer bg-transparent border-success",children:[Object(W.jsx)("button",{className:"btn btn-sm btn-outline-danger m-2",onClick:function(){return n(a)},children:" Profile "}),"friend"===t.tag||"friend"===r?Object(W.jsx)(o.c,{className:"btn btn-primary btn-sm m-2",exact:!0,to:{pathname:"/chats/".concat(t.connectionid),params:t},children:"Chat"}):Object(W.jsx)("button",{className:"btn btn-sm btn-outline-primary m-2",onClick:function(){return c(a,t.username,"sent","")},children:" + Add Friend "})]})]})})}))),le=Object(l.b)((function(e){return console.log(e.profile),console.log("Auth : ",e.auth),console.log("=> ",e.friends),{friendlist_global:e.friends,groups_global:e.groups,searchedUser:e.friends.searchedUser,friendlist:e.friends.friendlist,user_name:e.profile.username}}),{get_searched_user_list:function(e){return function(){var t=Object(b.a)(u.a.mark((function t(n){var a,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("aa gaya",e),a={headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":J.a.get("csrftoken")}},c=JSON.stringify({username:e}),t.prev=3,t.next=6,p.a.post("".concat("http://localhost:8000","/accounts/get_searched_users"),c,a);case 6:(r=t.sent).data.error?n({type:T}):(console.log("Ori : ",r.data),n({type:F,payload:r.data})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),n({type:T});case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}()},get_friend_list:function(){return function(){var e=Object(b.a)(u.a.mark((function e(t){var n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":J.a.get("csrftoken")}},console.log("in get friend"),a=JSON.stringify({}),e.prev=3,e.next=6,p.a.get("".concat("http://localhost:8000","/friends/getfriends"),a,n);case 6:(c=e.sent).data.error?t({type:A}):(console.log(c),t({type:E,payload:c.data})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t({type:A});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.get_searched_user_list,n=e.get_friend_list,c=e.searchedUser,r=e.friendlist;e.user_name;console.log("Searched User : ",c);var s=Object(a.useState)(""),o=Object(M.a)(s,2),i=o[0],l=o[1],d=Object(a.useState)(r),u=Object(M.a)(d,2),b=u[0],j=u[1];Object(a.useEffect)((function(){n()}),[]),Object(a.useEffect)((function(){j(r),h(),console.log("DRUGS")}),[r]),Object(a.useEffect)((function(){f(r,c)}),[c]),console.log("SearchList : ",b),console.log("FriendList : ",r);var p=function(e){return e.username.includes(i)},f=function(e,t){t.map((function(t){e.map((function(e){e.username!==t.username?t.tag="not friend":t.tag="friend"}))})),t=t.filter((function(e){return"friend"!==e.tag})),j(e.concat(t))},h=function(){r.map((function(e){e.tag="friend"})),j(r),console.log("FEDN ls:",r)};return Object(W.jsxs)(a.Fragment,{children:[Object(W.jsx)("div",{className:"navbar navbar-expand-sm w-100",children:Object(W.jsx)("form",{action:"",children:Object(W.jsxs)("div",{class:"input-group input-group-sm m-2  float-start",children:[Object(W.jsx)("input",{type:"text",onChange:function(e){return function(e){return l(e.target.value)}(e)},id:"searchbar",className:"form-control ",placeholder:"Enter username","aria-label":"Recipient's username","aria-describedby":"searchbtn"}),Object(W.jsx)("button",{class:"btn btn-outline-secondary btn-sm",onClick:function(e){return function(e){var n=0;if(0!=r.length){var a=r.filter(p);0!=a.length&&(j(a),n=1)}if(0!=c.length&&0===n){var s=c.filter(p);0!=s.length&&(j(s),n=1)}0==n&&t(i)}()},type:"button",id:"searchbtn",children:"Search"})]})})}),Object(W.jsx)("div",{className:"card-group",children:void 0===b?Object(W.jsx)(W.Fragment,{children:Object(W.jsxs)("div",{class:"card",children:[Object(W.jsx)("div",{class:"card-header",children:"ChatApp"}),Object(W.jsx)("div",{class:"card-body",children:Object(W.jsxs)("blockquote",{class:"blockquote mb-0",children:[Object(W.jsx)("h1",{children:"No Friends !"}),Object(W.jsxs)("footer",{class:"blockquote-footer",children:[" ",Object(W.jsx)("cite",{title:"Source Title",children:"ADD FRIENDS"})]})]})})]})}):""==i?r.map((function(e){return console.log("in card iteration"),Object(W.jsx)(ie,{tag:{tag:"friend"},friend:e})})):b.map((function(e){return console.log("Searchg Iteration : ",e),Object(W.jsx)(ie,{tag:{tag:"mixed"},friend:e})}))})]})})),de=n(46),ue=["component","isAuthenticated"],be=Object(l.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{})((function(e){var t=e.component,n=e.isAuthenticated,a=Object(de.a)(e,ue);return Object(W.jsx)(i.b,Object(q.a)(Object(q.a)({},a),{},{render:function(e){return n?Object(W.jsx)(t,Object(q.a)({},e)):Object(W.jsx)(i.a,{to:"/login"})}}))})),je=n(19),pe=n(43),fe=n(44),he={isAuthenticated:null},me={username:"",first_name:"",last_name:"",phone:"",city:""},Oe={friendlist:[],searchedUser:[]},xe={notify_list:[]},ge=Object(je.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case v:case y:return Object(q.a)(Object(q.a)({},e),{},{isAuthenticated:a});case f:return Object(q.a)(Object(q.a)({},e),{},{isAuthenticated:!1});case m:return Object(q.a)(Object(q.a)({},e),{},{isAuthenticated:!0,username:a});case x:case C:return Object(q.a)(Object(q.a)({},e),{},{isAuthenticated:!1,username:""});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case k:case N:return Object(q.a)(Object(q.a)({},e),{},{username:a.username,first_name:a.profile.first_name,last_name:a.profile.last_name,phone:a.profile.phone,city:a.profile.city});case S:return Object(q.a)(Object(q.a)({},e),{},{username:"",first_name:"",last_name:"",phone:"",city:""});case _:return Object(q.a)({},e);default:return e}},friends:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case E:return Object(q.a)(Object(q.a)({},e),{},{friendlist:a.data});case F:return console.log("Payload",a.data),Object(q.a)(Object(q.a)({},e),{},{searchedUser:a.data});default:return Object(q.a)({},e)}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;return n===P?Object(q.a)(Object(q.a)({},e),{},{notify_list:a.data}):Object(q.a)({},e)}}),ve=[fe.a],ye=Object(je.createStore)(ge,{},Object(pe.composeWithDevTools)(je.applyMiddleware.apply(void 0,ve))),Ne=(n(77),function(){return Object(W.jsx)(l.a,{store:ye,children:Object(W.jsx)(o.a,{children:Object(W.jsxs)(Q,{children:[Object(W.jsx)(i.b,{exact:!0,path:"/",component:Y}),Object(W.jsx)(i.b,{exact:!0,path:"/register",component:$}),Object(W.jsx)(i.b,{exact:!0,path:"/login",component:ee}),Object(W.jsx)(be,{exact:!0,path:"/friends",component:le}),Object(W.jsx)(be,{exact:!0,path:"/dashboard",component:te}),Object(W.jsx)(be,{exact:!0,path:"/chats/:id",component:oe})]})})})});s.a.render(Object(W.jsx)(c.a.StrictMode,{children:Object(W.jsx)(Ne,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.ef3deb29.chunk.js.map